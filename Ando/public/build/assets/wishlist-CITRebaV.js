import{_ as k,r as u,o as b,a as e,b as t,d as r,w as d,e as v,t as c,F as x,f as W,g as h,h as E,i as l,j as y}from"./app-Bd3q8yYu.js";const F={name:"UserWishlist",setup(){const f=u(!1),s=u(null),w=u([]),o=u(0),p=u(0),m=async()=>{f.value=!0,s.value=null;try{const n=await h.get("/api/wishlist");w.value=n.data.items,o.value=n.data.items.length}catch(n){s.value="Failed to load wishlist. Please try again.",console.error("Error fetching wishlist:",n)}finally{f.value=!1}},i=async()=>{try{const n=await h.get("/api/cart/count");p.value=n.data.count}catch(n){console.error("Error fetching cart count:",n)}},a=async n=>{try{await h.post("/api/cart/add",{product_id:n.id,quantity:1}),await i()}catch(_){console.error("Error adding to cart:",_)}},g=async n=>{try{await h.delete(`/api/wishlist/${n}`),await m()}catch(_){console.error("Error removing from wishlist:",_)}},C=async()=>{try{await h.post("/api/logout"),localStorage.removeItem("user_token"),window.location.href="/"}catch(n){console.error("Error during logout:",n)}};return b(()=>{m(),i()}),{loading:f,error:s,wishlistItems:w,wishlistCount:o,cartCount:p,fetchWishlist:m,addToCart:a,removeFromWishlist:g,logout:C}}},I={class:"wishlist-container"},N={class:"header"},T={class:"nav-links"},B={class:"icons"},V={key:0,class:"badge"},S={key:0,class:"badge"},L={class:"main-content"},M={class:"wishlist-section"},j={key:0,class:"loading-state"},q={key:1,class:"error-state"},A={key:2,class:"empty-state"},D={key:3,class:"wishlist-items"},H={class:"item-image"},P=["src","alt"],R={class:"item-details"},U={class:"item-price"},Y={class:"item-description"},z={class:"item-actions"},G=["onClick"],J=["onClick"];function K(f,s,w,o,p,m){const i=E("router-link");return l(),e("div",I,[t("header",N,[t("div",T,[r(i,{to:{name:"home"}},{default:d(()=>s[2]||(s[2]=[t("b",null,"Home",-1)])),_:1}),r(i,{to:{name:"news"}},{default:d(()=>s[3]||(s[3]=[t("b",null,"New",-1)])),_:1}),r(i,{to:{name:"user-trends"}},{default:d(()=>s[4]||(s[4]=[t("b",null,"Trends",-1)])),_:1}),r(i,{to:{name:"contact"}},{default:d(()=>s[5]||(s[5]=[t("b",null,"Contact",-1)])),_:1})]),s[7]||(s[7]=t("div",{class:"title"},[t("span",{class:"four-point-star"}),v(" Fashion Trend "),t("span",{class:"four-point-star blue"})],-1)),t("div",B,[s[6]||(s[6]=t("i",{class:"fas fa-search"},null,-1)),r(i,{to:{name:"user-wishlist"},class:"fas fa-heart"},{default:d(()=>[o.wishlistCount?(l(),e("span",V,c(o.wishlistCount),1)):y("",!0)]),_:1}),r(i,{to:{name:"purchase"},class:"fas fa-user"}),r(i,{to:{name:"user-cart"},class:"fas fa-shopping-cart"},{default:d(()=>[o.cartCount?(l(),e("span",S,c(o.cartCount),1)):y("",!0)]),_:1}),t("i",{class:"fas fa-sign-out-alt",onClick:s[0]||(s[0]=(...a)=>o.logout&&o.logout(...a))})])]),t("main",L,[t("section",M,[s[15]||(s[15]=t("h2",null,"My Wishlist",-1)),o.loading?(l(),e("div",j,s[8]||(s[8]=[t("i",{class:"fas fa-spinner fa-spin"},null,-1),t("p",null,"Loading wishlist...",-1)]))):o.error?(l(),e("div",q,[s[9]||(s[9]=t("i",{class:"fas fa-exclamation-circle"},null,-1)),t("p",null,c(o.error),1),t("button",{onClick:s[1]||(s[1]=(...a)=>o.fetchWishlist&&o.fetchWishlist(...a)),class:"action-btn"},"Retry")])):!o.wishlistItems||o.wishlistItems.length===0?(l(),e("div",A,[s[11]||(s[11]=t("i",{class:"fas fa-heart"},null,-1)),s[12]||(s[12]=t("h3",null,"Your wishlist is empty",-1)),s[13]||(s[13]=t("p",null,"Browse our products and add items to your wishlist",-1)),r(i,{to:{name:"user-trends"},class:"shop-now-btn"},{default:d(()=>s[10]||(s[10]=[v("Continue Shopping")])),_:1})])):(l(),e("div",D,[(l(!0),e(x,null,W(o.wishlistItems,a=>(l(),e("div",{key:a.id,class:"wishlist-item"},[t("div",H,[t("img",{src:a.image,alt:a.name},null,8,P)]),t("div",R,[t("h3",null,c(a.name),1),t("p",U,"$"+c(a.price),1),t("p",Y,c(a.description),1)]),t("div",z,[t("button",{onClick:g=>o.addToCart(a),class:"add-to-cart-btn"}," Add to Cart ",8,G),t("button",{onClick:g=>o.removeFromWishlist(a.id),class:"remove-btn"},s[14]||(s[14]=[t("i",{class:"fas fa-trash"},null,-1)]),8,J)])]))),128))]))])])])}const Q=k(F,[["render",K],["__scopeId","data-v-c39b62bb"]]);export{Q as default};
